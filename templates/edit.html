{% extends "layout.html" %}

{% block content %}
<script type="text/javascript" src="{{ url_for('static', filename = 'edit.js') }}"></script>
<script> let storeId = {{ store_id | tojson }}; </script>

<div class="container mt-4">
    <h2>Edit Store</h2>

    <form id="edit-form" method="POST">
        <div class="form-group">
            <label for="title">Name:</label>
            <input type="text" id="title" name="title" class="form-control" value="{{ store.title }}">
        </div>
        <div class="form-group">
            <label for="desc">Description:</label>
            <input type="text" id="desc" name="desc" class="form-control" value="{{ store.desc }}">
        </div>
        <div class="form-group">
            <label for="img">Image URL:</label>
            <input type="url" id="img" name="img" class="form-control" value="{{ store.img }}">
        </div>
        <div class="form-group">
            <label for="agg_rating">Aggregate Rating:</label>
            <input type="number" step="0.1" id="agg_rating" name="agg_rating" class="form-control" value="{{ store.agg_rating }}">
        </div>
        <div class="form-group">
            <label for="address">Address:</label>
            <input type="text" id="address" name="address" class="form-control" value="{{ store.address }}">
        </div>
        <div class="form-group">
            <label for="notes">Notes:</label>
            <textarea id="notes" name="notes" class="form-control">{{ store.notes }}</textarea>
        </div>
        <h5>Edit Reviews</h5>
        <div id="reviews-container">
            {% for review in store.reviews %}
            <div class="review-entry card p-3 mt-3 shadow-sm" data-review-id="{{ review.id }}">
                <div class="card-body">
                    <div class="mb-2">
                        <label class="form-label">Reviewer Name</label>
                        <input type="text" class="form-control reviewer" value="{{ review.author }}">
                    </div>
                    <div class="mb-2">
                        <label class="form-label">Rating (1-5)</label>
                        <input type="number" class="form-control review-rating" value="{{ review.rating }}" min="1" max="5">
                    </div>
                    <div class="mb-2">
                        <label class="form-label">Review</label>
                        <textarea class="form-control review-text">{{ review.review }}</textarea>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        <br>
        <button type="submit" class="btn btn-primary">Submit</button>
        <button type="button" id="discard-btn" class="btn btn-outline-danger">Discard Changes</button>
    </form>
</div>

<script>

</script>

{% endblock %}
